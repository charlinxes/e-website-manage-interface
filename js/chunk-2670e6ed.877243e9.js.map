{"version":3,"sources":["webpack:///./src/views/CustomerOrders.vue?8eed","webpack:///./src/views/CustomerOrders.vue?81aa","webpack:///src/views/CustomerOrders.vue","webpack:///./src/views/CustomerOrders.vue?7ae8","webpack:///./src/views/CustomerOrders.vue?69bc"],"names":["render","_vm","this","_h","$createElement","_c","_self","attrs","isOuterLoading","on","$event","staticClass","_l","item","key","id","staticStyle","style","_v","_s","category","title","content","price","origin_price","_f","preventDefault","getProduct","product","myModal","hide","imageUrl","directives","name","rawName","value","expression","$$selectedVal","Array","prototype","filter","call","target","options","o","selected","map","val","_value","$set","multiple","num","domProps","unit","_b","getProducts","paginationObj","staticRenderFns","data","products","total_pages","current_page","has_pre","has_next","components","Pagination","created","mounted","computed","filterProducts","methods","$http","get","api","then","console","log","response","component"],"mappings":"yIAAA,W,yCCAA,IAAIA,EAAS,WAAa,IAAIC,EAAIC,KAASC,EAAGF,EAAIG,eAAmBC,EAAGJ,EAAIK,MAAMD,IAAIF,EAAG,OAAOE,EAAG,MAAM,CAACA,EAAG,UAAU,CAACE,MAAM,CAAC,OAASN,EAAIO,eAAe,OAAS,QAAQC,GAAG,CAAC,gBAAgB,SAASC,GAAQT,EAAIO,eAAeE,MAAWL,EAAG,MAAM,CAACM,YAAY,YAAYV,EAAIW,GAAIX,EAAkB,gBAAE,SAASY,GAAM,OAAOR,EAAG,MAAM,CAACS,IAAID,EAAKE,GAAGJ,YAAY,mCAAmC,CAACN,EAAG,MAAM,CAACM,YAAY,wBAAwB,CAACN,EAAG,MAAM,CAACM,YAAY,gBAAgBK,YAAY,CAAC,kBAAkB,QAAQ,sBAAsB,UAAUC,MAAM,CAAE,mBAAqB,OAAUJ,EAAa,SAAI,OAASR,EAAG,MAAM,CAACM,YAAY,aAAa,CAACN,EAAG,OAAO,CAACM,YAAY,qCAAqC,CAACV,EAAIiB,GAAGjB,EAAIkB,GAAGN,EAAKO,aAAaf,EAAG,KAAK,CAACM,YAAY,iBAAiB,CAACV,EAAIiB,GAAGjB,EAAIkB,GAAGN,EAAKQ,UAAUhB,EAAG,IAAI,CAACM,YAAY,aAAa,CAACV,EAAIiB,GAAGjB,EAAIkB,GAAGN,EAAKS,YAAaT,EAAKU,OAASV,EAAKW,aAAcnB,EAAG,MAAM,CAACM,YAAY,MAAM,CAACV,EAAIiB,GAAGjB,EAAIkB,GAAGlB,EAAIwB,GAAG,iBAAPxB,CAAyBY,EAAKW,eAAe,OAAOnB,EAAG,MAAM,CAACM,YAAY,uDAAuD,CAACN,EAAG,MAAM,CAACA,EAAG,MAAM,CAACM,YAAY,MAAM,CAACV,EAAIiB,GAAG,MAAMjB,EAAIkB,GAAGlB,EAAIwB,GAAG,iBAAPxB,CAAyBY,EAAKW,eAAe,SAASnB,EAAG,MAAM,CAACM,YAAY,MAAM,CAACV,EAAIiB,GAAG,MAAMjB,EAAIkB,GAAGlB,EAAIwB,GAAG,iBAAPxB,CAAyBY,EAAKU,QAAQ,WAAWlB,EAAG,MAAM,CAACM,YAAY,sBAAsB,CAACN,EAAG,SAAS,CAACM,YAAY,mCAAmCJ,MAAM,CAAC,KAAO,UAAUE,GAAG,CAAC,MAAQ,SAASC,GAAgC,OAAxBA,EAAOgB,iBAAwBzB,EAAI0B,WAAWd,EAAKE,OAAO,CAACd,EAAIiB,GAAG,YAAYb,EAAG,SAAS,CAACM,YAAY,wCAAwCJ,MAAM,CAAC,KAAO,SAAS,SAAW,KAAK,CAACN,EAAIiB,GAAG,sBAAqB,GAAGb,EAAG,MAAM,CAACM,YAAY,aAAaJ,MAAM,CAAC,GAAK,eAAe,SAAW,KAAK,KAAO,SAAS,kBAAkB,aAAa,cAAc,SAAS,CAACF,EAAG,MAAM,CAACM,YAAY,eAAeJ,MAAM,CAAC,KAAO,aAAa,CAACF,EAAG,MAAM,CAACM,YAAY,iBAAiB,CAACN,EAAG,MAAM,CAACM,YAAY,gBAAgB,CAACN,EAAG,KAAK,CAACM,YAAY,cAAcJ,MAAM,CAAC,GAAK,eAAe,CAACN,EAAIiB,GAAGjB,EAAIkB,GAAGlB,EAAI2B,QAAQP,UAAUhB,EAAG,SAAS,CAACM,YAAY,YAAYJ,MAAM,CAAC,KAAO,SAAS,aAAa,SAASE,GAAG,CAAC,MAAQ,SAASC,GAAgC,OAAxBA,EAAOgB,iBAAwBzB,EAAI4B,QAAQC,aAAazB,EAAG,MAAM,CAACM,YAAY,cAAc,CAACN,EAAG,MAAM,CAACM,YAAY,YAAYJ,MAAM,CAAC,IAAMN,EAAI2B,QAAQG,SAAS,IAAM,MAAM1B,EAAG,aAAa,CAACM,YAAY,mBAAmB,CAACN,EAAG,IAAI,CAACJ,EAAIiB,GAAGjB,EAAIkB,GAAGlB,EAAI2B,QAAQN,cAAerB,EAAI2B,QAAQL,OAAStB,EAAI2B,QAAQJ,aAAcnB,EAAG,MAAM,CAACM,YAAY,MAAM,CAACV,EAAIiB,GAAGjB,EAAIkB,GAAGlB,EAAIwB,GAAG,iBAAPxB,CAAyBA,EAAI2B,QAAQJ,eAAe,QAAQnB,EAAG,MAAM,CAACM,YAAY,uDAAuD,CAACN,EAAG,MAAM,CAACA,EAAG,MAAM,CAACM,YAAY,MAAM,CAACV,EAAIiB,GAAG,MAAMjB,EAAIkB,GAAGlB,EAAIwB,GAAG,iBAAPxB,CAAyBA,EAAI2B,QAAQJ,eAAe,UAAUnB,EAAG,MAAM,CAACM,YAAY,MAAM,CAACV,EAAIiB,GAAG,QAAQjB,EAAIkB,GAAGlB,EAAIwB,GAAG,iBAAPxB,CAAyBA,EAAI2B,QAAQL,QAAQ,UAAUlB,EAAG,SAAS,CAAC2B,WAAW,CAAC,CAACC,KAAK,QAAQC,QAAQ,UAAUC,MAAOlC,EAAI2B,QAAW,IAAEQ,WAAW,gBAAgBzB,YAAY,oBAAoBJ,MAAM,CAAC,KAAO,IAAIE,GAAG,CAAC,OAAS,SAASC,GAAQ,IAAI2B,EAAgBC,MAAMC,UAAUC,OAAOC,KAAK/B,EAAOgC,OAAOC,SAAQ,SAASC,GAAG,OAAOA,EAAEC,YAAWC,KAAI,SAASF,GAAG,IAAIG,EAAM,WAAYH,EAAIA,EAAEI,OAASJ,EAAET,MAAM,OAAOY,KAAO9C,EAAIgD,KAAKhD,EAAI2B,QAAS,MAAOlB,EAAOgC,OAAOQ,SAAWb,EAAgBA,EAAc,OAAOpC,EAAIW,GAAG,IAAK,SAASuC,GAAK,OAAO9C,EAAG,SAAS,CAACS,IAAIqC,EAAIC,SAAS,CAAC,MAAQD,IAAM,CAAClD,EAAIiB,GAAG,OAAOjB,EAAIkB,GAAGgC,GAAK,IAAIlD,EAAIkB,GAAGlB,EAAI2B,QAAQyB,MAAM,UAAS,KAAKhD,EAAG,MAAM,CAACM,YAAY,gBAAgB,CAACN,EAAG,MAAM,CAACM,YAAY,+BAA+B,CAACV,EAAIiB,GAAG,QAAQb,EAAG,SAAS,CAACJ,EAAIiB,GAAGjB,EAAIkB,GAAGlB,EAAIwB,GAAG,iBAAPxB,CAAyBA,EAAI2B,QAAQuB,IAAMlD,EAAI2B,QAAQL,WAAWtB,EAAIiB,GAAG,SAASb,EAAG,SAAS,CAACM,YAAY,kBAAkBJ,MAAM,CAAC,KAAO,SAAS,SAAW,KAAK,CAACN,EAAIiB,GAAG,qBAAqBb,EAAG,aAAaJ,EAAIqD,GAAG,CAAC7C,GAAG,CAAC,eAAiBR,EAAIsD,cAAc,aAAatD,EAAIuD,eAAc,KAAS,IACt1HC,EAAkB,G,uDCuEtB,GACExB,KAAM,iBACNyB,KAFF,WAGI,MAAO,CACLC,SAAU,GACV/B,QAAS,GACTC,QAAS,GACTrB,gBAAgB,EAChBgD,cAAe,CACbI,YAAa,EACbC,aAAc,EACdC,SAAS,EACTC,UAAU,KAIhBC,WAAY,CACVC,WAAJ,QAEEC,QAnBF,WAoBIhE,KAAKqD,eAEPY,QAtBF,WAuBIjE,KAAK2B,QAAU,IAAI,EAAvB,4CAEEuC,SAAU,CACRC,eADJ,WAEM,OAAOnE,KAAKyD,SAASnB,QAAO,SAAlC,iCAGE8B,QAAS,CACPf,YADJ,WACA,sEACMrD,KAAKM,gBAAiB,EACtB,IAAN,yGACMN,KAAKqE,MAAMC,IAAIC,GAAKC,MAAK,SAA/B,GACQC,QAAQC,IAAIC,EAASnB,KAAKC,UAC1B,EAAR,kBACQ,EAAR,yBACQ,EAAR,oCAGIhC,WAXJ,SAWA,cACMzB,KAAKM,gBAAiB,EACtB,IAAN,mGACMN,KAAKqE,MAAMC,IAAIC,GAAKC,MAAK,SAA/B,GACQ,EAAR,kBACQ,EAAR,uBAEa,EAAb,uCACQ,EAAR,qBCzHwV,I,wBCQpVI,EAAY,eACd,EACA9E,EACAyD,GACA,EACA,KACA,WACA,MAIa,aAAAqB,E","file":"js/chunk-2670e6ed.877243e9.js","sourcesContent":["export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./CustomerOrders.vue?vue&type=style&index=0&id=7c0ffefb&lang=css&scoped=true&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('Loading',{attrs:{\"active\":_vm.isOuterLoading,\"loader\":\"bars\"},on:{\"update:active\":function($event){_vm.isOuterLoading=$event}}}),_c('div',{staticClass:\"row mt-3\"},_vm._l((_vm.filterProducts),function(item){return _c('div',{key:item.id,staticClass:\"col-lg-3 col-md-4 col-sm-6 mb-4\"},[_c('div',{staticClass:\"card border-0 shadow\"},[_c('div',{staticClass:\"bg-img-height\",staticStyle:{\"background-size\":\"cover\",\"background-position\":\"center\"},style:({'background-image': (\"url(\" + (item.imageUrl) + \")\")})}),_c('div',{staticClass:\"card-body\"},[_c('span',{staticClass:\"badge bg-secondary float-end ml-2\"},[_vm._v(_vm._s(item.category))]),_c('h5',{staticClass:\"card-title h4\"},[_vm._v(_vm._s(item.title))]),_c('p',{staticClass:\"card-text\"},[_vm._v(_vm._s(item.content))]),(item.price == item.origin_price)?_c('div',{staticClass:\"h4\"},[_vm._v(_vm._s(_vm._f(\"currencyFilter\")(item.origin_price))+\" \")]):_c('div',{staticClass:\"d-flex justify-content-between align-items-baseline\"},[_c('div',[_c('del',{staticClass:\"h6\"},[_vm._v(\"原價 \"+_vm._s(_vm._f(\"currencyFilter\")(item.origin_price))+\" \")])]),_c('div',{staticClass:\"h4\"},[_vm._v(\"特價 \"+_vm._s(_vm._f(\"currencyFilter\")(item.price))+\" \")])])]),_c('div',{staticClass:\"card-footer d-flex\"},[_c('button',{staticClass:\"btn btn-outline-secondary btn-sm\",attrs:{\"type\":\"button\"},on:{\"click\":function($event){$event.preventDefault();return _vm.getProduct(item.id)}}},[_vm._v(\" 查看更多 \")]),_c('button',{staticClass:\"btn btn-outline-danger btn-sm ms-auto\",attrs:{\"type\":\"button\",\"disabled\":\"\"}},[_vm._v(\" 加到購物車 \")])])])])}),0),_c('div',{staticClass:\"modal fade\",attrs:{\"id\":\"productModal\",\"tabindex\":\"-1\",\"role\":\"dialog\",\"aria-labelledby\":\"ModalLabel\",\"aria-hidden\":\"true\"}},[_c('div',{staticClass:\"modal-dialog\",attrs:{\"role\":\"document\"}},[_c('div',{staticClass:\"modal-content\"},[_c('div',{staticClass:\"modal-header\"},[_c('h5',{staticClass:\"modal-title\",attrs:{\"id\":\"ModalLabel\"}},[_vm._v(_vm._s(_vm.product.title))]),_c('button',{staticClass:\"btn-close\",attrs:{\"type\":\"button\",\"aria-label\":\"Close\"},on:{\"click\":function($event){$event.preventDefault();return _vm.myModal.hide()}}})]),_c('div',{staticClass:\"modal-body\"},[_c('img',{staticClass:\"img-fluid\",attrs:{\"src\":_vm.product.imageUrl,\"alt\":\"\"}}),_c('blockquote',{staticClass:\"blockquote mt-3\"},[_c('p',[_vm._v(_vm._s(_vm.product.content))])]),(_vm.product.price == _vm.product.origin_price)?_c('div',{staticClass:\"h4\"},[_vm._v(_vm._s(_vm._f(\"currencyFilter\")(_vm.product.origin_price))+\" 元\")]):_c('div',{staticClass:\"d-flex justify-content-between align-items-baseline\"},[_c('div',[_c('del',{staticClass:\"h6\"},[_vm._v(\"原價 \"+_vm._s(_vm._f(\"currencyFilter\")(_vm.product.origin_price))+\" 元\")])]),_c('div',{staticClass:\"h4\"},[_vm._v(\"現在只要 \"+_vm._s(_vm._f(\"currencyFilter\")(_vm.product.price))+\" 元\")])]),_c('select',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.product.num),expression:\"product.num\"}],staticClass:\"form-control mt-3\",attrs:{\"name\":\"\"},on:{\"change\":function($event){var $$selectedVal = Array.prototype.filter.call($event.target.options,function(o){return o.selected}).map(function(o){var val = \"_value\" in o ? o._value : o.value;return val}); _vm.$set(_vm.product, \"num\", $event.target.multiple ? $$selectedVal : $$selectedVal[0])}}},_vm._l((10),function(num){return _c('option',{key:num,domProps:{\"value\":num}},[_vm._v(\" 選購 \"+_vm._s(num)+\" \"+_vm._s(_vm.product.unit)+\" \")])}),0)]),_c('div',{staticClass:\"modal-footer\"},[_c('div',{staticClass:\"text-muted text-nowrap me-3\"},[_vm._v(\" 小計 \"),_c('strong',[_vm._v(_vm._s(_vm._f(\"currencyFilter\")(_vm.product.num * _vm.product.price)))]),_vm._v(\" 元 \")]),_c('button',{staticClass:\"btn btn-primary\",attrs:{\"type\":\"button\",\"disabled\":\"\"}},[_vm._v(\" 加到購物車 \")])])])])]),_c('Pagination',_vm._b({on:{\"updateDataList\":_vm.getProducts}},'Pagination',_vm.paginationObj,false))],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div>\n    <Loading :active.sync=\"isOuterLoading\" loader=\"bars\"></Loading>\n    <div class=\"row mt-3\">\n      <div class=\"col-lg-3 col-md-4 col-sm-6 mb-4\" v-for=\"item in filterProducts\" :key=\"item.id\">\n        <div class=\"card border-0 shadow\">\n          <div :style=\"{'background-image': `url(${item.imageUrl})`}\"\n            style=\"background-size: cover; background-position: center\" class=\"bg-img-height\"></div>\n          <div class=\"card-body\">\n            <span class=\"badge bg-secondary float-end ml-2\">{{item.category}}</span>\n            <h5 class=\"card-title h4\">{{item.title}}</h5>\n            <p class=\"card-text\">{{item.content}}</p>\n            <div class=\"h4\" v-if=\"item.price == item.origin_price\">{{ item.origin_price | currencyFilter }} </div>\n            <div class=\"d-flex justify-content-between align-items-baseline\" v-else>\n              <div><del class=\"h6\">原價 {{ item.origin_price | currencyFilter }} </del></div>\n              <div class=\"h4\">特價 {{ item.price | currencyFilter }} </div>\n            </div>\n          </div>\n          <div class=\"card-footer d-flex\">\n            <button type=\"button\" class=\"btn btn-outline-secondary btn-sm\" @click.prevent=\"getProduct(item.id)\">\n              查看更多\n            </button>\n            <button type=\"button\" class=\"btn btn-outline-danger btn-sm ms-auto\" disabled>\n              加到購物車\n            </button>\n          </div>\n        </div>\n      </div>\n    </div>\n    <!-- Modal -->\n    <div class=\"modal fade\" id=\"productModal\" tabindex=\"-1\" role=\"dialog\" aria-labelledby=\"ModalLabel\" aria-hidden=\"true\">\n      <div class=\"modal-dialog\" role=\"document\">\n        <div class=\"modal-content\">\n          <div class=\"modal-header\">\n            <h5 class=\"modal-title\" id=\"ModalLabel\">{{ product.title }}</h5>\n            <button type=\"button\" class=\"btn-close\" aria-label=\"Close\" @click.prevent=\"myModal.hide()\"></button>\n          </div>\n          <div class=\"modal-body\">\n            <img :src=\"product.imageUrl\" class=\"img-fluid\" alt=\"\">\n            <blockquote class=\"blockquote mt-3\">\n              <p>{{ product.content }}</p>\n            </blockquote>\n            <div class=\"h4\" v-if=\"product.price == product.origin_price\">{{ product.origin_price | currencyFilter }} 元</div>\n            <div class=\"d-flex justify-content-between align-items-baseline\" v-else>\n              <div><del class=\"h6\">原價 {{ product.origin_price | currencyFilter }} 元</del></div>\n              <div class=\"h4\">現在只要 {{ product.price | currencyFilter }} 元</div>\n            </div>\n            <select name=\"\" class=\"form-control mt-3\" v-model=\"product.num\">\n              <option :value=\"num\" v-for=\"num in 10\" :key=\"num\">\n                選購 {{num}} {{product.unit}}\n              </option>\n            </select>\n          </div>\n          <div class=\"modal-footer\">\n            <div class=\"text-muted text-nowrap me-3\">\n              小計 <strong>{{ product.num * product.price | currencyFilter }}</strong> 元\n            </div>\n            <button type=\"button\" class=\"btn btn-primary\" disabled>\n              加到購物車\n            </button>\n          </div>\n        </div>\n      </div>\n    </div>\n    <Pagination v-bind=\"paginationObj\" @updateDataList=\"getProducts\"/>\n  </div>\n</template>\n\n<script>\nimport Modal from 'bootstrap/js/dist/modal';\nimport Pagination from '../components/Pagination.vue';\n\nexport default {\n  name: 'CustomerOrders',\n  data() {\n    return {\n      products: [],\n      product: {},\n      myModal: {},\n      isOuterLoading: false,\n      paginationObj: {\n        total_pages: 1,\n        current_page: 1,\n        has_pre: false,\n        has_next: false,\n      },\n    };\n  },\n  components: {\n    Pagination,\n  },\n  created() {\n    this.getProducts();\n  },\n  mounted() {\n    this.myModal = new Modal(document.getElementById('productModal'));\n  },\n  computed: {\n    filterProducts() {\n      return this.products.filter((currentValue) => currentValue.is_enabled === '1');\n    },\n  },\n  methods: {\n    getProducts(page = 1) {\n      this.isOuterLoading = true;\n      const api = `${process.env.VUE_APP_APIPATH}/api/${process.env.VUE_APP_CUSTOMPATH}/products?page=${page}`;\n      this.$http.get(api).then((response) => {\n        console.log(response.data.products);\n        this.isOuterLoading = false;\n        this.products = response.data.products;\n        this.paginationObj = response.data.pagination;\n      });\n    },\n    getProduct(id) {\n      this.isOuterLoading = true;\n      const api = `${process.env.VUE_APP_APIPATH}/api/${process.env.VUE_APP_CUSTOMPATH}/product/${id}`;\n      this.$http.get(api).then((response) => {\n        this.isOuterLoading = false;\n        this.product = response.data.product;\n        // 讓數量預設為1，但因為原本API傳進來的物件中沒有該屬性，所以要用set方法或ES6{...}使其能追蹤其狀態\n        if (!this.product.num) { this.$set(this.product, 'num', 1); }\n        this.myModal.show();\n      });\n    },\n  },\n};\n</script>\n\n<style lang=\"css\" scoped>\n  .bg-img-height{\n    height: 150px\n  };\n</style>\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./CustomerOrders.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./CustomerOrders.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./CustomerOrders.vue?vue&type=template&id=7c0ffefb&scoped=true&\"\nimport script from \"./CustomerOrders.vue?vue&type=script&lang=js&\"\nexport * from \"./CustomerOrders.vue?vue&type=script&lang=js&\"\nimport style0 from \"./CustomerOrders.vue?vue&type=style&index=0&id=7c0ffefb&lang=css&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"7c0ffefb\",\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}